!function(e){function t(n){if(o[n])return o[n].exports;var s=o[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){e.exports=React},function(e,t){},function(e,t,o){"use strict";function n(e){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o])}Object.defineProperty(t,"__esModule",{value:!0}),n(o(3)),n(o(4))},function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=o(0);o(1);var a=function(e){function t(t){var o=e.call(this,t)||this;o.componentId="",o.flowKey="",o.attributes={},o.selectedItem=null,o.text="",o.componentId=t.id,o.flowKey=t.flowKey;var n=manywho.model.getComponent(o.props.id,o.props.flowKey);if(n.attributes)for(var s in n.attributes)o.attributes[s]=n.attributes[s];return o}return n(t,e),t.prototype.componentDidMount=function(){var e=manywho.model.getComponent(this.props.id,this.props.flowKey),t=manywho.state.getComponent(this.props.id,this.props.flowKey),o=e.contentValue?parseInt(e.contentValue):1;t.contentValue=o,this.forceUpdate()},t.prototype.componentDidUpdate=function(){},t.prototype.getAttribute=function(e){return this.attributes[e]?this.attributes[e]:null},t.prototype.sortByKey=function(e,t){return e.sort(function(e,o){var n=e[t],s=o[t];return n<s?-1:n>s?1:0})},t.prototype.render=function(){var e=manywho.model.getComponent(this.props.id,this.props.flowKey),t=manywho.state.getComponent(this.props.id,this.props.flowKey),o=e.contentValue?parseInt(e.contentValue):1;if(t.loading)return s.createElement("div",{className:"dsg-simo-progress col-sm-6"}," ");var n=[];if(e.objectData&&e.objectData.length>0)for(var a=0;a<e.objectData.length;a++){var r=e.objectData[a],i={};i.key=manywho.utils.getObjectDataProperty(r.properties,"key").contentValue,i.label=manywho.utils.getObjectDataProperty(r.properties,"label").contentValue,i.name=manywho.utils.getObjectDataProperty(r.properties,"name").contentValue,i.value=manywho.utils.getObjectDataProperty(r.properties,"value").contentValue,n.push(i)}n=this.sortByKey(n,"key");for(var c=[],l="",p=0;p<n.length;p++){var m=n[p];l="glyphicon glyphicon-"+m.value+" dsg-simo-progress-icon ",parseInt(m.key)<o?l+=" dsg-simo-progress-icon-complete":parseInt(m.key)===o?l+=" dsg-simo-progress-icon-active":l+=" dsg-simo-progress-icon-incomplete";var u=s.createElement("span",{className:l});c.push(u)}e.width,e.height;return s.createElement("div",{className:"dsg-simo-progress col-sm-6"},s.createElement("div",{className:"dsg-simo-progress-inner"},c))},t}(s.Component);manywho.component.register("DsgSimoProgress",a),t.default=a},function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=o(0);o(1);var a=function(e){function t(t){var o=e.call(this,t)||this;o.componentId="",o.flowKey="",o.attributes={},o.selectedItem=null,o.text="",o.componentId=t.id,o.flowKey=t.flowKey;var n=manywho.model.getComponent(o.props.id,o.props.flowKey);if(n.attributes)for(var s in n.attributes)o.attributes[s]=n.attributes[s];return o}return n(t,e),t.prototype.componentDidMount=function(){var e=manywho.model.getComponent(this.props.id,this.props.flowKey);manywho.state.getComponent(this.props.id,this.props.flowKey);manywho.state.setComponent(this.props.id,{objectData:[e.objectData[0]]},this.props.flowKey,!0),this.forceUpdate()},t.prototype.componentDidUpdate=function(){var e=manywho.model.getComponent(this.props.id,this.props.flowKey);manywho.state.getComponent(this.props.id,this.props.flowKey);manywho.state.setComponent(this.props.id,{objectData:[e.objectData[0]]},this.props.flowKey,!0)},t.prototype.getAttribute=function(e){return this.attributes[e]?this.attributes[e]:null},t.prototype.render=function(){var e=manywho.model.getComponent(this.props.id,this.props.flowKey);if(manywho.state.getComponent(this.props.id,this.props.flowKey).loading)return s.createElement("div",{className:"dsg-simo-product col-sm-6"}," ");if(e.objectData&&e.objectData[0]){var t=e.objectData[0],o=(manywho.utils.getObjectDataProperty(t.properties,"Manufacturer").contentValue,manywho.utils.getObjectDataProperty(t.properties,"Product").contentValue),n=manywho.utils.getObjectDataProperty(t.properties,"Model").contentValue,a=manywho.utils.getObjectDataProperty(t.properties,"Spec").contentValue,r=manywho.utils.getObjectDataProperty(t.properties,"ContractPeriod").contentValue,i=manywho.utils.getObjectDataProperty(t.properties,"MonthlyMinutes").contentValue,c=manywho.utils.getObjectDataProperty(t.properties,"MonthlyTexts").contentValue,l=manywho.utils.getObjectDataProperty(t.properties,"MonthlyData").contentValue,p=manywho.utils.getObjectDataProperty(t.properties,"MonthlyCost").contentValue,m=manywho.utils.getObjectDataProperty(t.properties,"InitialCost").contentValue;manywho.utils.getObjectDataProperty(t.properties,"Provider").contentValue;return s.createElement("div",{className:"dsg-simo-product col-sm-6"},s.createElement("div",{className:"dsg-simo-product-inner"},s.createElement("div",{className:"dsg-simo-product-top"},s.createElement("div",{className:"dsg-simo-product-titlebar"},s.createElement("span",{className:"dsg-simo-product-title"},o," ",n," ",a)),s.createElement("div",{className:"dsg-simo-product-detailbar"},s.createElement("div",{className:"dsg-simo-product-detailbar-element"},s.createElement("span",{className:"glyphicon glyphicon-calendar dsg-simo-product-element-icon"}),s.createElement("span",{className:"dsg-simo-product-element-text"},r),s.createElement("span",{className:"dsg-simo-product-element-label"},"Months")),s.createElement("div",{className:"dsg-simo-product-detailbar-element"},s.createElement("span",{className:"glyphicon glyphicon-earphone dsg-simo-product-element-icon"}),s.createElement("span",{className:"dsg-simo-product-element-text"},i),s.createElement("span",{className:"dsg-simo-product-element-label"},"Minutes")),s.createElement("div",{className:"dsg-simo-product-detailbar-element"},s.createElement("span",{className:"glyphicon glyphicon-text-size dsg-simo-product-element-icon"}),s.createElement("span",{className:"dsg-simo-product-element-text"},c),s.createElement("span",{className:"dsg-simo-product-element-label"},"Texts")),s.createElement("div",{className:"dsg-simo-product-detailbar-element"},s.createElement("span",{className:"glyphicon glyphicon-cloud-download dsg-simo-product-element-icon"}),s.createElement("span",{className:"dsg-simo-product-element-text"},l),s.createElement("span",{className:"dsg-simo-product-element-label"},"MB")),s.createElement("div",{className:"dsg-simo-product-detailbar-element"},s.createElement("div",null,s.createElement("span",{className:"dsg-simo-product-cost"},"£",p),s.createElement("span",{className:"dsg-simo-product-cost"},"Monthly")),s.createElement("div",null,s.createElement("span",{className:"dsg-simo-product-cost"},"£",m),s.createElement("span",{className:"dsg-simo-product-cost"},"Upfront"))))),s.createElement("div",{className:"dsg-simo-product-bottom-bottom"},s.createElement("div",{className:"dsg-simo-product-bottom"},s.createElement("div",{className:"dsg-simo-product-bottom-element"},s.createElement("div",null,s.createElement("span",{className:"dsg-simo-bottom-title"},"Upfront")),s.createElement("div",null,s.createElement("span",{className:"dsg-simo-bottom-value"},"£",m))),s.createElement("div",{className:"dsg-simo-product-bottom-element"},s.createElement("div",null,s.createElement("span",{className:"dsg-simo-bottom-title"},"Monthly")),s.createElement("div",null,s.createElement("span",{className:"dsg-simo-bottom-value"},"£",p)))))))}return s.createElement("div",{className:"dsg-simo-product col-sm-6"}," ")},t}(s.Component);manywho.component.register("DsgSimoProduct",a),t.default=a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZHNnLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBiYzJiNzI4ZWM3OGVhZmYyMjBhZSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdFwiIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2RzZy1zaW1vLXByb2dyZXNzLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvZHNnLXNpbW8tcHJvZHVjdC1kZXRhaWxzLnRzeCJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUmVhY3QiLCJfX2V4cG9ydCIsInZhbHVlIiwiX19leHRlbmRzIiwidGhpcyIsImV4dGVuZFN0YXRpY3MiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiYiIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJEc2dTaW1vUHJvZ3Jlc3MiLCJfc3VwZXIiLCJwcm9wcyIsIl90aGlzIiwiY29tcG9uZW50SWQiLCJmbG93S2V5IiwiYXR0cmlidXRlcyIsInNlbGVjdGVkSXRlbSIsInRleHQiLCJpZCIsImZsb3dNb2RlbCIsIm1hbnl3aG8iLCJtb2RlbCIsImdldENvbXBvbmVudCIsImtleSIsImNvbXBvbmVudERpZE1vdW50IiwiZmxvd1N0YXRlIiwic3RhdGUiLCJzdGF0dXMiLCJjb250ZW50VmFsdWUiLCJwYXJzZUludCIsImZvcmNlVXBkYXRlIiwiY29tcG9uZW50RGlkVXBkYXRlIiwiZ2V0QXR0cmlidXRlIiwiYXR0cmlidXRlTmFtZSIsInNvcnRCeUtleSIsImFycmF5Iiwic29ydCIsImEiLCJ4IiwieSIsInJlbmRlciIsImxvYWRpbmciLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiZGF0YSIsIm9iamVjdERhdGEiLCJsZW5ndGgiLCJwb3MiLCJpY29uIiwidXRpbHMiLCJnZXRPYmplY3REYXRhUHJvcGVydHkiLCJwcm9wZXJ0aWVzIiwibGFiZWwiLCJwdXNoIiwiaWNvbnMiLCJjbHMiLCJkUG9zIiwic3BhbiIsIndpZHRoIiwiaGVpZ2h0IiwiQ29tcG9uZW50IiwiY29tcG9uZW50IiwicmVnaXN0ZXIiLCJkZWZhdWx0IiwiRHNnU2ltb1Byb2R1Y3QiLCJzZXRDb21wb25lbnQiLCJwcm9kdWN0IiwidmVyc2lvbiIsInNwZWMiLCJjb250cmFjdFBlcmlvZCIsIm1vbnRobHlNaW51dGVzIiwibW9udGhseVRleHRzIiwibW9udGhseURhdGEiLCJtb250aGx5Q29zdCIsImluaXRpYWxDb3N0Il0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBSSxFQUFBSixFQUNBSyxHQUFBLEVBQ0FILFdBVUEsT0FOQUosR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQTRCQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxTQUFBUCxFQUFBUSxFQUFBQyxHQUNBWixFQUFBYSxFQUFBVixFQUFBUSxJQUNBRyxPQUFBQyxlQUFBWixFQUFBUSxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWYsR0FDQSxHQUFBUSxHQUFBUixL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QSxXQUNJOUMsRUFBQThDLGNBQUEsUUFBTUMsVUFBVSx5QkxvTXBCLElLcE04QytCLEdBQzFDOUUsRUFBQThDLGNBQUEsUUFBTUMsVUFBVSx5QkFBdUIsZUFLdkQvQyxFQUFBOEMsY0FBQSxPQUFLQyxVQUFVLGtDQUNYL0MsRUFBQThDLGNBQUEsT0FBS0MsVUFBVSwyQkFDWC9DLEVBQUE4QyxjQUFBLE9BQUtDLFVBQVUsbUNBQ1gvQyxFQUFBOEMsY0FBQSxXQUNJOUMsRUFBQThDLGNBQUEsUUFBTUMsVUFBVSx5QkFBdUIsWUFFM0MvQyxFQUFBOEMsY0FBQSxXQUNJOUMsRUFBQThDLGNBQUEsUUFBTUMsVUFBVSx5QkxpTXBCLElLak04QytCLEtBR2xEOUUsRUFBQThDLGNBQUEsT0FBS0MsVUFBVSxtQ0FDWC9DLEVBQUE4QyxjQUFBLFdBQ0k5QyxFQUFBOEMsY0FBQSxRQUFNQyxVQUFVLHlCQUF1QixZQUUzQy9DLEVBQUE4QyxjQUFBLFdBQ0k5QyxFQUFBOEMsY0FBQSxRQUFNQyxVQUFVLHlCTGdNcEIsSUtoTThDOEIsU0FVMUUsTUFBTzdFLEdBQUE4QyxjQUFBLE9BQUtDLFVBQVUsNkJBQTJCLE1BSzdEcUIsR0F2SzZCcEUsRUFBTWdFLFVBeUtuQ3hDLFNBQVF5QyxVQUFVQyxTQUFTLGlCQUFrQkUsR0FFN0M1RixFQUFBMkYsUUFBZUMiLCJmaWxlIjoiZHNnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0O1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oMykpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKTtcclxuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xyXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG52YXIgRHNnU2ltb1Byb2dyZXNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKERzZ1NpbW9Qcm9ncmVzcywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERzZ1NpbW9Qcm9ncmVzcyhwcm9wcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbXBvbmVudElkID0gXCJcIjtcclxuICAgICAgICBfdGhpcy5mbG93S2V5ID0gXCJcIjtcclxuICAgICAgICBfdGhpcy5hdHRyaWJ1dGVzID0ge307XHJcbiAgICAgICAgX3RoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDtcclxuICAgICAgICBfdGhpcy50ZXh0ID0gXCJcIjtcclxuICAgICAgICBfdGhpcy5jb21wb25lbnRJZCA9IHByb3BzLmlkO1xyXG4gICAgICAgIF90aGlzLmZsb3dLZXkgPSBwcm9wcy5mbG93S2V5O1xyXG4gICAgICAgIC8vcHVzaCBhdHRyaWJ1dGVzIGludG8ga2V5ZWQgbWFwIFxyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudChfdGhpcy5wcm9wcy5pZCwgX3RoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgaWYgKGZsb3dNb2RlbC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBmbG93TW9kZWwuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYXR0cmlidXRlc1trZXldID0gZmxvd01vZGVsLmF0dHJpYnV0ZXNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBEc2dTaW1vUHJvZ3Jlc3MucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBzdGF0dXMgPSBmbG93TW9kZWwuY29udGVudFZhbHVlID8gcGFyc2VJbnQoZmxvd01vZGVsLmNvbnRlbnRWYWx1ZSkgOiAxO1xyXG4gICAgICAgIGZsb3dTdGF0ZS5jb250ZW50VmFsdWUgPSBzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIERzZ1NpbW9Qcm9ncmVzcy5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIERzZ1NpbW9Qcm9ncmVzcy5wcm90b3R5cGUuZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKGF0dHJpYnV0ZU5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRHNnU2ltb1Byb2dyZXNzLnByb3RvdHlwZS5zb3J0QnlLZXkgPSBmdW5jdGlvbiAoYXJyYXksIGtleSkge1xyXG4gICAgICAgIHJldHVybiBhcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gYVtrZXldO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGJba2V5XTtcclxuICAgICAgICAgICAgcmV0dXJuICgoeCA8IHkpID8gLTEgOiAoKHggPiB5KSA/IDEgOiAwKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRHNnU2ltb1Byb2dyZXNzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIHN0YXR1cyA9IGZsb3dNb2RlbC5jb250ZW50VmFsdWUgPyBwYXJzZUludChmbG93TW9kZWwuY29udGVudFZhbHVlKSA6IDE7XHJcbiAgICAgICAgaWYgKGZsb3dTdGF0ZS5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2dyZXNzIGNvbC1zbS02XCIgfSwgXCIgXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2xvYWQgdGhlIGljb24gYXJyYXlcclxuICAgICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgICAgIGlmIChmbG93TW9kZWwub2JqZWN0RGF0YSAmJiBmbG93TW9kZWwub2JqZWN0RGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHBvcyA9IDA7IHBvcyA8IGZsb3dNb2RlbC5vYmplY3REYXRhLmxlbmd0aDsgcG9zKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gZmxvd01vZGVsLm9iamVjdERhdGFbcG9zXTtcclxuICAgICAgICAgICAgICAgIHZhciBpY29uID0ge307XHJcbiAgICAgICAgICAgICAgICBpY29uLmtleSA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KGkucHJvcGVydGllcywgXCJrZXlcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWNvbi5sYWJlbCA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KGkucHJvcGVydGllcywgXCJsYWJlbFwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpY29uLm5hbWUgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShpLnByb3BlcnRpZXMsIFwibmFtZVwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpY29uLnZhbHVlID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoaS5wcm9wZXJ0aWVzLCBcInZhbHVlXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGRhdGEucHVzaChpY29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhID0gdGhpcy5zb3J0QnlLZXkoZGF0YSwgXCJrZXlcIik7XHJcbiAgICAgICAgdmFyIGljb25zID0gW107XHJcbiAgICAgICAgdmFyIGNscyA9IFwiXCI7XHJcbiAgICAgICAgZm9yICh2YXIgZFBvcyA9IDA7IGRQb3MgPCBkYXRhLmxlbmd0aDsgZFBvcysrKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gZGF0YVtkUG9zXTtcclxuICAgICAgICAgICAgY2xzID0gXCJnbHlwaGljb24gZ2x5cGhpY29uLVwiICsgZC52YWx1ZSArIFwiIGRzZy1zaW1vLXByb2dyZXNzLWljb24gXCI7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZUludChkLmtleSkgPCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGNscyArPSBcIiBkc2ctc2ltby1wcm9ncmVzcy1pY29uLWNvbXBsZXRlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VJbnQoZC5rZXkpID09PSBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGNscyArPSBcIiBkc2ctc2ltby1wcm9ncmVzcy1pY29uLWFjdGl2ZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIGRzZy1zaW1vLXByb2dyZXNzLWljb24taW5jb21wbGV0ZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzcGFuID0gUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNscyB9KTtcclxuICAgICAgICAgICAgaWNvbnMucHVzaChzcGFuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHdpZHRoID0gZmxvd01vZGVsLndpZHRoO1xyXG4gICAgICAgIHZhciBoZWlnaHQgPSBmbG93TW9kZWwuaGVpZ2h0O1xyXG4gICAgICAgIC8vdmFyIGNvbnRyb2xTdHlsZSA9IHtcIndpZHRoXCIgOiB3aWR0aCB9O1xyXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2dyZXNzIGNvbC1zbS02XCIgfSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9ncmVzcy1pbm5lclwiIH0sIGljb25zKSk7XHJcbiAgICAgICAgLypcclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWxpc3QtYWx0IGRzZy1zaW1vLXByb2dyZXNzLWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1zdGFyLWVtcHR5IGRzZy1zaW1vLXByb2dyZXNzLWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi11c2VyIGRzZy1zaW1vLXByb2dyZXNzLWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jcmVkaXQtY2FyZCBkc2ctc2ltby1wcm9ncmVzcy1pY29uXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tY2hlY2sgZHNnLXNpbW8tcHJvZ3Jlc3MtaWNvblwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLW9rIGRzZy1zaW1vLXByb2dyZXNzLWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1naWZ0IGRzZy1zaW1vLXByb2dyZXNzLWljb25cIj48L3NwYW4+Ki9cclxuICAgIH07XHJcbiAgICByZXR1cm4gRHNnU2ltb1Byb2dyZXNzO1xyXG59KFJlYWN0LkNvbXBvbmVudCkpO1xyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignRHNnU2ltb1Byb2dyZXNzJywgRHNnU2ltb1Byb2dyZXNzKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gRHNnU2ltb1Byb2dyZXNzO1xyXG5cblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XHJcbl9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcbnZhciBEc2dTaW1vUHJvZHVjdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhEc2dTaW1vUHJvZHVjdCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERzZ1NpbW9Qcm9kdWN0KHByb3BzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29tcG9uZW50SWQgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmZsb3dLZXkgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmF0dHJpYnV0ZXMgPSB7fTtcclxuICAgICAgICBfdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsO1xyXG4gICAgICAgIF90aGlzLnRleHQgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmNvbXBvbmVudElkID0gcHJvcHMuaWQ7XHJcbiAgICAgICAgX3RoaXMuZmxvd0tleSA9IHByb3BzLmZsb3dLZXk7XHJcbiAgICAgICAgLy9wdXNoIGF0dHJpYnV0ZXMgaW50byBrZXllZCBtYXAgXHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KF90aGlzLnByb3BzLmlkLCBfdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICBpZiAoZmxvd01vZGVsLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGZsb3dNb2RlbC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hdHRyaWJ1dGVzW2tleV0gPSBmbG93TW9kZWwuYXR0cmlidXRlc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIERzZ1NpbW9Qcm9kdWN0LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICB2YXIgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgdGhpcy5wcm9wcy5mbG93S2V5KSB8fCB7fTtcclxuICAgICAgICBtYW55d2hvLnN0YXRlLnNldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB7IG9iamVjdERhdGE6IFtmbG93TW9kZWwub2JqZWN0RGF0YVswXV0gfSwgdGhpcy5wcm9wcy5mbG93S2V5LCB0cnVlKTtcclxuICAgICAgICAvKlxyXG4gICAgICAgIHZhciBwcm9kdWN0ID0ge307XHJcbiAgICAgICAgaWYoZmxvd01vZGVsLm9iamVjdERhdGEgJiYgZmxvd01vZGVsLm9iamVjdERhdGFbMF0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwcm9kdWN0ID0gZmxvd01vZGVsLm9iamVjdERhdGFbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwge29iamVjdERhdGE6IFtwcm9kdWN0XX0sIHRoaXMucHJvcHMuZmxvd0tleSwgdHJ1ZSk7XHJcbiovXHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIERzZ1NpbW9Qcm9kdWN0LnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSkgfHwge307XHJcbiAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgeyBvYmplY3REYXRhOiBbZmxvd01vZGVsLm9iamVjdERhdGFbMF1dIH0sIHRoaXMucHJvcHMuZmxvd0tleSwgdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgRHNnU2ltb1Byb2R1Y3QucHJvdG90eXBlLmdldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVOYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERzZ1NpbW9Qcm9kdWN0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgaWYgKGZsb3dTdGF0ZS5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QgY29sLXNtLTZcIiB9LCBcIiBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmbG93TW9kZWwub2JqZWN0RGF0YSAmJiBmbG93TW9kZWwub2JqZWN0RGF0YVswXSkge1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdCA9IGZsb3dNb2RlbC5vYmplY3REYXRhWzBdO1xyXG4gICAgICAgICAgICB2YXIgbWFudWZhY3R1cmVyID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkocHJvZHVjdC5wcm9wZXJ0aWVzLCBcIk1hbnVmYWN0dXJlclwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkocHJvZHVjdC5wcm9wZXJ0aWVzLCBcIlByb2R1Y3RcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbW9kZWwgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsIFwiTW9kZWxcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgc3BlYyA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHByb2R1Y3QucHJvcGVydGllcywgXCJTcGVjXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGNvbnRyYWN0UGVyaW9kID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkocHJvZHVjdC5wcm9wZXJ0aWVzLCBcIkNvbnRyYWN0UGVyaW9kXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIG1vbnRobHlNaW51dGVzID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkocHJvZHVjdC5wcm9wZXJ0aWVzLCBcIk1vbnRobHlNaW51dGVzXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIG1vbnRobHlUZXh0cyA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHByb2R1Y3QucHJvcGVydGllcywgXCJNb250aGx5VGV4dHNcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbW9udGhseURhdGEgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsIFwiTW9udGhseURhdGFcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbW9udGhseUNvc3QgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsIFwiTW9udGhseUNvc3RcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbENvc3QgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsIFwiSW5pdGlhbENvc3RcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgcHJvdmlkZXIgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsIFwiUHJvdmlkZXJcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0IGNvbC1zbS02XCIgfSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tcHJvZHVjdC1pbm5lclwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LXRvcFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tcHJvZHVjdC10aXRsZWJhclwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LXRpdGxlXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWMpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWRldGFpbGJhclwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QtZGV0YWlsYmFyLWVsZW1lbnRcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImdseXBoaWNvbiBnbHlwaGljb24tY2FsZW5kYXIgZHNnLXNpbW8tcHJvZHVjdC1lbGVtZW50LWljb25cIiB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtdGV4dFwiIH0sIGNvbnRyYWN0UGVyaW9kKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtbGFiZWxcIiB9LCBcIk1vbnRoc1wiKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QtZGV0YWlsYmFyLWVsZW1lbnRcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImdseXBoaWNvbiBnbHlwaGljb24tZWFycGhvbmUgZHNnLXNpbW8tcHJvZHVjdC1lbGVtZW50LWljb25cIiB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtdGV4dFwiIH0sIG1vbnRobHlNaW51dGVzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtbGFiZWxcIiB9LCBcIk1pbnV0ZXNcIikpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWRldGFpbGJhci1lbGVtZW50XCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJnbHlwaGljb24gZ2x5cGhpY29uLXRleHQtc2l6ZSBkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtaWNvblwiIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QtZWxlbWVudC10ZXh0XCIgfSwgbW9udGhseVRleHRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtbGFiZWxcIiB9LCBcIlRleHRzXCIpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tcHJvZHVjdC1kZXRhaWxiYXItZWxlbWVudFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiZ2x5cGhpY29uIGdseXBoaWNvbi1jbG91ZC1kb3dubG9hZCBkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtaWNvblwiIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QtZWxlbWVudC10ZXh0XCIgfSwgbW9udGhseURhdGEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QtZWxlbWVudC1sYWJlbFwiIH0sIFwiTUJcIikpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWRldGFpbGJhci1lbGVtZW50XCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QtY29zdFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcdTAwQTNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRobHlDb3N0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tcHJvZHVjdC1jb3N0XCIgfSwgXCJNb250aGx5XCIpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QtY29zdFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcdTAwQTNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxDb3N0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tcHJvZHVjdC1jb3N0XCIgfSwgXCJVcGZyb250XCIpKSkpKSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLXByb2R1Y3QtYm90dG9tLWJvdHRvbVwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tcHJvZHVjdC1ib3R0b21cIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1wcm9kdWN0LWJvdHRvbS1lbGVtZW50XCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImRzZy1zaW1vLWJvdHRvbS10aXRsZVwiIH0sIFwiVXBmcm9udFwiKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1ib3R0b20tdmFsdWVcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXHUwMEEzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsQ29zdCkpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tcHJvZHVjdC1ib3R0b20tZWxlbWVudFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJkc2ctc2ltby1ib3R0b20tdGl0bGVcIiB9LCBcIk1vbnRobHlcIikpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tYm90dG9tLXZhbHVlXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFx1MDBBM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhseUNvc3QpKSkpKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZHNnLXNpbW8tcHJvZHVjdCBjb2wtc20tNlwiIH0sIFwiIFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERzZ1NpbW9Qcm9kdWN0O1xyXG59KFJlYWN0LkNvbXBvbmVudCkpO1xyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignRHNnU2ltb1Byb2R1Y3QnLCBEc2dTaW1vUHJvZHVjdCk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IERzZ1NpbW9Qcm9kdWN0O1xyXG5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBkc2cuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBiYzJiNzI4ZWM3OGVhZmYyMjBhZSIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJSZWFjdFwiXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydCAqIGZyb20gJy4vZHNnLXNpbW8tcHJvZ3Jlc3MnO1xuZXhwb3J0ICogZnJvbSAnLi9kc2ctc2ltby1wcm9kdWN0LWRldGFpbHMnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LnRzeCIsIlxyXG5kZWNsYXJlIHZhciBtYW55d2hvOiBhbnk7XHJcblxyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCAnLi9kc2cuY3NzJztcclxuXHJcbmNsYXNzIERzZ1NpbW9Qcm9ncmVzcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxhbnksIGFueT4gXHJcbnsgICBcclxuICAgIGNvbXBvbmVudElkOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgZmxvd0tleTogc3RyaW5nID1cIlwiOyAgICBcclxuICAgIGF0dHJpYnV0ZXMgOiBhbnkgPSB7fTtcclxuICAgIHNlbGVjdGVkSXRlbTogc3RyaW5nID0gbnVsbDtcclxuXHJcbiAgICB0ZXh0IDogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcyA6IGFueSlcclxuXHR7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SWQgPSBwcm9wcy5pZDtcclxuICAgICAgICB0aGlzLmZsb3dLZXkgPSBwcm9wcy5mbG93S2V5O1xyXG5cclxuICAgICAgICAvL3B1c2ggYXR0cmlidXRlcyBpbnRvIGtleWVkIG1hcCBcclxuXHRcdHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCAgIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcblx0XHRpZihmbG93TW9kZWwuYXR0cmlidXRlcylcclxuXHRcdHtcclxuXHRcdFx0Zm9yKHZhciBrZXkgaW4gZmxvd01vZGVsLmF0dHJpYnV0ZXMpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLmF0dHJpYnV0ZXNba2V5XSA9IGZsb3dNb2RlbC5hdHRyaWJ1dGVzW2tleV07XHJcblx0XHRcdH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIFxyXG4gICAge1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCAgIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgY29uc3QgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgICB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBzdGF0dXMgPSBmbG93TW9kZWwuY29udGVudFZhbHVlP3BhcnNlSW50KGZsb3dNb2RlbC5jb250ZW50VmFsdWUpOjE7XHJcbiAgICAgICAgZmxvd1N0YXRlLmNvbnRlbnRWYWx1ZSA9IHN0YXR1cztcclxuXHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpXHJcbiAgICB7XHJcblxyXG4gICAgfVxyXG5cclxuXHRnZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSA6IHN0cmluZylcclxuXHR7XHJcblx0XHRpZih0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzb3J0QnlLZXkoYXJyYXkgOiBhbnksIGtleSA6IHN0cmluZykgXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LnNvcnQoZnVuY3Rpb24oYSA6IGFueSwgYiA6IGFueSkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IGFba2V5XTsgXHJcbiAgICAgICAgICAgIHZhciB5ID0gYltrZXldO1xyXG4gICAgICAgICAgICByZXR1cm4gKCh4IDwgeSkgPyAtMSA6ICgoeCA+IHkpID8gMSA6IDApKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblx0cmVuZGVyKClcclxuXHR7XHJcblx0ICAgXHJcblx0XHRjb25zdCBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCAgIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgY29uc3QgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgICB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBzdGF0dXMgPSBmbG93TW9kZWwuY29udGVudFZhbHVlP3BhcnNlSW50KGZsb3dNb2RlbC5jb250ZW50VmFsdWUpOjE7XHJcblxyXG4gICAgICAgIGlmKGZsb3dTdGF0ZS5sb2FkaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZHNnLXNpbW8tcHJvZ3Jlc3MgY29sLXNtLTZcIj4gPC9kaXY+O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9sb2FkIHRoZSBpY29uIGFycmF5XHJcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuXHJcbiAgICAgICAgaWYoZmxvd01vZGVsLm9iamVjdERhdGEgJiYgZmxvd01vZGVsLm9iamVjdERhdGEubGVuZ3RoID4gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHBvcyA9IDAgOyBwb3MgPCBmbG93TW9kZWwub2JqZWN0RGF0YS5sZW5ndGggOyBwb3MrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSBmbG93TW9kZWwub2JqZWN0RGF0YVtwb3NdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGljb24gOiBhbnkgPSB7fTtcclxuICAgICAgICAgICAgICAgIGljb24ua2V5ID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkoaS5wcm9wZXJ0aWVzLFwia2V5XCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGljb24ubGFiZWwgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShpLnByb3BlcnRpZXMsXCJsYWJlbFwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpY29uLm5hbWUgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShpLnByb3BlcnRpZXMsXCJuYW1lXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGljb24udmFsdWUgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShpLnByb3BlcnRpZXMsXCJ2YWx1ZVwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnB1c2goaWNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGEgPSB0aGlzLnNvcnRCeUtleShkYXRhLFwia2V5XCIpO1xyXG5cclxuICAgICAgICB2YXIgaWNvbnMgPSBbXTtcclxuICAgICAgICB2YXIgY2xzID0gXCJcIjtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgZFBvcyA9IDAgOyBkUG9zIDwgZGF0YS5sZW5ndGggOyBkUG9zKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZCA9IGRhdGFbZFBvc107XHJcbiAgICAgICAgICAgIGNscyA9IFwiZ2x5cGhpY29uIGdseXBoaWNvbi1cIiArIGQudmFsdWUgKyBcIiBkc2ctc2ltby1wcm9ncmVzcy1pY29uIFwiO1xyXG5cclxuICAgICAgICAgICAgaWYocGFyc2VJbnQoZC5rZXkpPHN0YXR1cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIGRzZy1zaW1vLXByb2dyZXNzLWljb24tY29tcGxldGVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYocGFyc2VJbnQoZC5rZXkpPT09c3RhdHVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbHMgKz0gXCIgZHNnLXNpbW8tcHJvZ3Jlc3MtaWNvbi1hY3RpdmVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIGRzZy1zaW1vLXByb2dyZXNzLWljb24taW5jb21wbGV0ZVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNwYW4gPSA8c3BhbiBjbGFzc05hbWU9e2Nsc30+PC9zcGFuPjtcclxuICAgICAgICAgICAgaWNvbnMucHVzaChzcGFuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB2YXIgd2lkdGggPSBmbG93TW9kZWwud2lkdGg7XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IGZsb3dNb2RlbC5oZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vdmFyIGNvbnRyb2xTdHlsZSA9IHtcIndpZHRoXCIgOiB3aWR0aCB9O1xyXG5cclxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9ncmVzcyBjb2wtc20tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHNnLXNpbW8tcHJvZ3Jlc3MtaW5uZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2ljb25zfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICA8L2Rpdj47XHJcblxyXG4vKlxyXG48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWxpc3QtYWx0IGRzZy1zaW1vLXByb2dyZXNzLWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tc3Rhci1lbXB0eSBkc2ctc2ltby1wcm9ncmVzcy1pY29uXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXVzZXIgZHNnLXNpbW8tcHJvZ3Jlc3MtaWNvblwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jcmVkaXQtY2FyZCBkc2ctc2ltby1wcm9ncmVzcy1pY29uXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZWNrIGRzZy1zaW1vLXByb2dyZXNzLWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tb2sgZHNnLXNpbW8tcHJvZ3Jlc3MtaWNvblwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1naWZ0IGRzZy1zaW1vLXByb2dyZXNzLWljb25cIj48L3NwYW4+Ki9cclxuICAgIH1cclxufVxyXG5cclxubWFueXdoby5jb21wb25lbnQucmVnaXN0ZXIoJ0RzZ1NpbW9Qcm9ncmVzcycsIERzZ1NpbW9Qcm9ncmVzcyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEc2dTaW1vUHJvZ3Jlc3M7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2RzZy1zaW1vLXByb2dyZXNzLnRzeCIsIlxyXG5kZWNsYXJlIHZhciBtYW55d2hvOiBhbnk7XHJcblxyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCAnLi9kc2cuY3NzJztcclxuXHJcbmNsYXNzIERzZ1NpbW9Qcm9kdWN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiBcclxueyAgIFxyXG4gICAgY29tcG9uZW50SWQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBmbG93S2V5OiBzdHJpbmcgPVwiXCI7ICAgIFxyXG4gICAgYXR0cmlidXRlcyA6IGFueSA9IHt9O1xyXG4gICAgc2VsZWN0ZWRJdGVtOiBzdHJpbmcgPSBudWxsO1xyXG5cclxuICAgIHRleHQgOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzIDogYW55KVxyXG5cdHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJZCA9IHByb3BzLmlkO1xyXG4gICAgICAgIHRoaXMuZmxvd0tleSA9IHByb3BzLmZsb3dLZXk7XHJcblxyXG4gICAgICAgIC8vcHVzaCBhdHRyaWJ1dGVzIGludG8ga2V5ZWQgbWFwIFxyXG5cdFx0dmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsICAgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuXHRcdGlmKGZsb3dNb2RlbC5hdHRyaWJ1dGVzKVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IodmFyIGtleSBpbiBmbG93TW9kZWwuYXR0cmlidXRlcylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuYXR0cmlidXRlc1trZXldID0gZmxvd01vZGVsLmF0dHJpYnV0ZXNba2V5XTtcclxuXHRcdFx0fVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkgXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsICAgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICB2YXIgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgICB0aGlzLnByb3BzLmZsb3dLZXkpIHx8IHt9O1xyXG5cclxuICAgICAgICBtYW55d2hvLnN0YXRlLnNldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB7b2JqZWN0RGF0YTogW2Zsb3dNb2RlbC5vYmplY3REYXRhWzBdXX0sIHRoaXMucHJvcHMuZmxvd0tleSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgdmFyIHByb2R1Y3QgPSB7fTtcclxuICAgICAgICBpZihmbG93TW9kZWwub2JqZWN0RGF0YSAmJiBmbG93TW9kZWwub2JqZWN0RGF0YVswXSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb2R1Y3QgPSBmbG93TW9kZWwub2JqZWN0RGF0YVswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICBtYW55d2hvLnN0YXRlLnNldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB7b2JqZWN0RGF0YTogW3Byb2R1Y3RdfSwgdGhpcy5wcm9wcy5mbG93S2V5LCB0cnVlKTtcclxuKi9cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUoKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCAgIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsICAgdGhpcy5wcm9wcy5mbG93S2V5KSB8fCB7fTtcclxuXHJcbiAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwge29iamVjdERhdGE6IFtmbG93TW9kZWwub2JqZWN0RGF0YVswXV19LCB0aGlzLnByb3BzLmZsb3dLZXksIHRydWUpO1xyXG4gICAgfVxyXG5cclxuXHRnZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSA6IHN0cmluZylcclxuXHR7XHJcblx0XHRpZih0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG4gICAgfVxyXG4gICAgXHJcblx0cmVuZGVyKClcclxuXHR7XHJcblx0ICAgXHJcblx0XHRjb25zdCBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCAgIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgY29uc3QgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgICB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGZsb3dTdGF0ZS5sb2FkaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZHNnLXNpbW8tcHJvZHVjdCBjb2wtc20tNlwiPiA8L2Rpdj47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihmbG93TW9kZWwub2JqZWN0RGF0YSAmJiBmbG93TW9kZWwub2JqZWN0RGF0YVswXSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gZmxvd01vZGVsLm9iamVjdERhdGFbMF07XHJcblxyXG4gICAgICAgICAgICB2YXIgbWFudWZhY3R1cmVyID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkocHJvZHVjdC5wcm9wZXJ0aWVzLFwiTWFudWZhY3R1cmVyXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb24gPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsXCJQcm9kdWN0XCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIG1vZGVsID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkocHJvZHVjdC5wcm9wZXJ0aWVzLFwiTW9kZWxcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgc3BlYyA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHByb2R1Y3QucHJvcGVydGllcyxcIlNwZWNcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGNvbnRyYWN0UGVyaW9kID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkocHJvZHVjdC5wcm9wZXJ0aWVzLFwiQ29udHJhY3RQZXJpb2RcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbW9udGhseU1pbnV0ZXMgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsXCJNb250aGx5TWludXRlc1wiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBtb250aGx5VGV4dHMgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsXCJNb250aGx5VGV4dHNcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbW9udGhseURhdGEgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsXCJNb250aGx5RGF0YVwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbW9udGhseUNvc3QgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShwcm9kdWN0LnByb3BlcnRpZXMsXCJNb250aGx5Q29zdFwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsQ29zdCA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHByb2R1Y3QucHJvcGVydGllcyxcIkluaXRpYWxDb3N0XCIpLmNvbnRlbnRWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm92aWRlciA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHByb2R1Y3QucHJvcGVydGllcyxcIlByb3ZpZGVyXCIpLmNvbnRlbnRWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QgY29sLXNtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWlubmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LXRpdGxlYmFyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtdGl0bGVcIj57dmVyc2lvbn0ge21vZGVsfSB7c3BlY308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWRldGFpbGJhclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtZGV0YWlsYmFyLWVsZW1lbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tY2FsZW5kYXIgZHNnLXNpbW8tcHJvZHVjdC1lbGVtZW50LWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtdGV4dFwiPntjb250cmFjdFBlcmlvZH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtbGFiZWxcIj5Nb250aHM8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtZGV0YWlsYmFyLWVsZW1lbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tZWFycGhvbmUgZHNnLXNpbW8tcHJvZHVjdC1lbGVtZW50LWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtdGV4dFwiPnttb250aGx5TWludXRlc308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtbGFiZWxcIj5NaW51dGVzPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWRldGFpbGJhci1lbGVtZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRleHQtc2l6ZSBkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtaWNvblwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtZWxlbWVudC10ZXh0XCI+e21vbnRobHlUZXh0c308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtbGFiZWxcIj5UZXh0czwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHNnLXNpbW8tcHJvZHVjdC1kZXRhaWxiYXItZWxlbWVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jbG91ZC1kb3dubG9hZCBkc2ctc2ltby1wcm9kdWN0LWVsZW1lbnQtaWNvblwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtZWxlbWVudC10ZXh0XCI+e21vbnRobHlEYXRhfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtZWxlbWVudC1sYWJlbFwiPk1CPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWRldGFpbGJhci1lbGVtZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtY29zdFwiPsKje21vbnRobHlDb3N0fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWNvc3RcIj5Nb250aGx5PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtY29zdFwiPsKje2luaXRpYWxDb3N0fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWNvc3RcIj5VcGZyb250PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtYm90dG9tLWJvdHRvbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHNnLXNpbW8tcHJvZHVjdC1ib3R0b21cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkc2ctc2ltby1wcm9kdWN0LWJvdHRvbS1lbGVtZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRzZy1zaW1vLWJvdHRvbS10aXRsZVwiPlVwZnJvbnQ8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZHNnLXNpbW8tYm90dG9tLXZhbHVlXCI+wqN7aW5pdGlhbENvc3R9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QtYm90dG9tLWVsZW1lbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZHNnLXNpbW8tYm90dG9tLXRpdGxlXCI+TW9udGhseTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkc2ctc2ltby1ib3R0b20tdmFsdWVcIj7Co3ttb250aGx5Q29zdH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImRzZy1zaW1vLXByb2R1Y3QgY29sLXNtLTZcIj4gPC9kaXY+O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbm1hbnl3aG8uY29tcG9uZW50LnJlZ2lzdGVyKCdEc2dTaW1vUHJvZHVjdCcsIERzZ1NpbW9Qcm9kdWN0KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IERzZ1NpbW9Qcm9kdWN0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9kc2ctc2ltby1wcm9kdWN0LWRldGFpbHMudHN4Il0sInNvdXJjZVJvb3QiOiIifQ==